<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>优化问题经典算法(一)——Simplex Algorithm - 难知如阴</title><meta name="Description" content="Simplex Algorithm"><meta property="og:title" content="优化问题经典算法(一)——Simplex Algorithm" />
<meta property="og:description" content="Simplex Algorithm" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://skydominate.github.io/simplex/" /><meta property="og:image" content="https://skydominate.github.io/simplex/featured-image.jpg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-24T02:26:40+08:00" />
<meta property="article:modified_time" content="2023-10-30T02:26:40+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://skydominate.github.io/simplex/featured-image.jpg"/>
<meta name="twitter:title" content="优化问题经典算法(一)——Simplex Algorithm"/>
<meta name="twitter:description" content="Simplex Algorithm"/>
<meta name="application-name" content="难知如阴">
<meta name="apple-mobile-web-app-title" content="难知如阴"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://skydominate.github.io/simplex/" /><link rel="prev" href="https://skydominate.github.io/latex-project/" /><link rel="next" href="https://skydominate.github.io/latex-bib/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "优化问题经典算法(一)——Simplex Algorithm",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/skydominate.github.io\/simplex\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/skydominate.github.io\/simplex\/featured-image.jpg",
                            "width":  240 ,
                            "height":  167 
                        }],"genre": "posts","keywords": "运筹优化, algorithm","wordcount":  3262 ,
        "url": "https:\/\/skydominate.github.io\/simplex\/","datePublished": "2021-12-24T02:26:40+08:00","dateModified": "2023-10-30T02:26:40+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Lioyd Shaw","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/skydominate.github.io\/images\/shadow.jpg",
                    "width":  1024 ,
                    "height":  576 
                }},"author": {
                "@type": "Person",
                "name": "Lioyd Shaw"
            },"description": "Simplex Algorithm"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="难知如阴"><span class="header-title-pre"><i class='fas fa-theater-masks fa-fw'></i></span>难知如阴</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/documentation/"> 文档 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="选择语言">简体中文<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/simplex/" selected>简体中文</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="难知如阴"><span class="header-title-pre"><i class='fas fa-theater-masks fa-fw'></i></span>难知如阴</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/documentation/" title="">文档</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">简体中文<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/simplex/" selected>简体中文</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">优化问题经典算法(一)——Simplex Algorithm</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Lioyd Shaw</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/documentation/"><i class="far fa-folder fa-fw"></i>文档</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-12-24">2021-12-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 3262 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 7 分钟&nbsp;<span id="/simplex/" class="leancloud_visitors" data-flag-title="优化问题经典算法(一)——Simplex Algorithm">
                        <i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
                    </span>&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/simplex/featured-image.jpg"
        data-srcset="/simplex/featured-image.jpg, /simplex/featured-image.jpg 1.5x, /simplex/featured-image.jpg 2x"
        data-sizes="auto"
        alt="/simplex/featured-image.jpg"
        title="Simplex Algorithm" /></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-线性规划的标准形式">1 线性规划的标准形式</a></li>
    <li><a href="#2-无界unbounded-情况">2 无界(unbounded) 情况</a></li>
    <li><a href="#3-单纯形法实现">3 单纯形法实现</a></li>
    <li><a href="#4-初始解-neq-可行解">4 初始解 $\neq$ 可行解</a></li>
    <li><a href="#5-初始化">5 初始化</a></li>
    <li><a href="#6-代码实现">6 代码实现</a></li>
    <li><a href="#7-从几何的角度">7 从几何的角度</a></li>
    <li><a href="#8-单纯形的时间复杂度">8 单纯形的时间复杂度</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p><em><strong>经典单纯形算法</strong></em></p>
<p>单纯形法是求解线性规划问题最常用、最有效的算法之一。单纯形法最早由 George Dantzig 于1947年提出。如果线性规划问题的最优解存在，则一定可以在其可行区域的顶点中找到。基于此，单纯形法的基本思路是：先找出可行域的一个顶点，据一定规则判断其是否最优；若否，则转换到与之相邻的另一顶点，并使目标函数值更优；如此下去，直到找到某最优解为止。</p>
<h2 id="1-线性规划的标准形式">1 线性规划的标准形式</h2>
<div>
$$
\begin{aligned}
    \min \quad& c^Tx \\
    s.t. \quad & Ax\leq b \\
    & x\geq 0
\end{aligned}
$$
</div>
<p>对于非标准的线性规划</p>
<ul>
<li>如果是 max，则乘 $-1$ 后求 min</li>
<li>如果存在 $=$ 约束，则转为 $\geq$ 和 $\leq$</li>
<li>对于 $\leq$ 约束，乘 $-1$ 后转为 $\leq$</li>
<li>如果存在负变量，则用 $x'-x''$ 替代，其中 $x',x''\geq 0$</li>
</ul>
<p>在迭代时，需要注意可能在几次迭代中函数的值并没有产生变化。这种情况被称为退化 (Degeneracy)，退化有可能会导致单纯形法无法终止，而产生循环 (cycling)。</p>
<p>在《算法导论》中对退化和循环提到</p>
<blockquote>
<p>Degeneracy can prevent the simplex algorithm from terminating, because it can lead to a phenomenon known as cycling: the slack forms at two different iterations of SIMPLEX are identical. Because of degeneracy, SIMPLEX could choose a sequence of pivot operations that leave the objective value unchanged but repeat a slack form within the sequence. Since SIMPLEX is a deterministic algorithm, if it cycles, then it will cycle through the same series of slack forms forever, never terminating.</p>
</blockquote>
<p>对此，有两个避免退化的方法：</p>
<ul>
<li>在选择换入变量和换出变量时，总选择满足条件的下表最小的</li>
<li>加入随机扰动</li>
</ul>
<h2 id="2-无界unbounded-情况">2 无界(unbounded) 情况</h2>
<p>对于无界的线性规划，目标函数可以无限制的减小，体现在单纯形法中则是某个换出变量可以无限制增大而不违反任何约束，即不存在换入变量。</p>
<h2 id="3-单纯形法实现">3 单纯形法实现</h2>
<p>对于初始问题，将其松弛为</p>
<div>
$$
\begin{aligned}
    \min \quad& -x_1-14x_2-6x_3  & \\
    s.t. \quad & x_1+x_2+x_3+x_4 & =4 \\
    & x_1 \hspace{7em} +x_5 & =2 \\
    & \hspace{4.5em} x_3 \hspace{5em} +x_6 & =3 \\
    & \hspace{1.8em} 3x_2 + x_3 \hspace{7.5em} +x_7 & =6 \\
    & x_1,\hspace{0.9em} x_2, \hspace{0.8em} x_3, \hspace{0.6em} x_4, \hspace{1.2em} x_5, \hspace{1.1em} x_6, \hspace{1em} x_7 & \geq 0
\end{aligned}
$$
</div>
<p>可以得到下面的矩阵</p>
<div>
$$
C=
\left(\begin{matrix}
    -1 & -14 & -6 & 0 & 0 & 0 & 0
\end{matrix}\right)
$$
</div>
<div>
$$
B=
\left(\begin{matrix}
    4 \\ 2 \\ 3 \\ 6
\end{matrix}\right)
\quad A=
\left(\begin{matrix}
    1 & 1 & 1 & 1 & 0 & 0 & 0 \\
    1 & 0 & 0 & 0 & 1 & 0 & 0 \\
    0 & 0 & 1 & 0 & 0 & 1 & 0 \\
    0 & 3 & 1 & 0 & 0 & 0 & 1 \\
\end{matrix}\right)
$$
</div>
<p>将其合并成矩阵</p>
<div>
$$
S_1=
\left(\begin{matrix}
     C \\
    B \quad A
\end{matrix}\right)
$$
</div>
<p>其中，$S_1[0][0]$ 为目标值 $z=0$。</p>
<p>接下来寻找换入换出变量，将矩阵 $S_1$ 写为基变量 $=$ 非基变量的形式</p>
<div>
$$
\begin{aligned}
    z &= -x_1-14x_2-6x_3 \\
    x_4 & = 4-x_1-x_2-x_3 \\
    x_5 &= 2-x_1 \\
    x_6 & =3-x_3 \\
    x_7 & =6-3x_2-x_3
\end{aligned}
$$
</div>
<p>目标值 $z$ 等于所有非基变量为 $0$ 时的最小值。找到换入变量 $x_2$，因为令 $x_2$ 增大能更大程度的使目标值 $z$ 减小。对于四个基变量约束条件，可以得到约束最紧的为 $x_7$。将所有的换入变量 $x_2$ 替换为 $2-x_7/3-x_3/3$，可以得到</p>
<div>
$$
\begin{aligned}
    z &= -28-x_1+\frac{14}{3}x_7-\frac{4}{3}x_3 \\
    x_4 & = 2-x_1+\frac{1}{3}x_7-\frac{2}{3}x_3 \\
    x_5 &= 2-x_1 \\
    x_6 & =3-x_3 \\
    x_2 & =2-\frac{1}{3}x_7-\frac{1}{3}x_3
\end{aligned}
$$
</div>
<p>此时的矩阵表示为</p>
<div>
$$
S_2=
\left(\begin{matrix}
    -28 & -1 & 0 & -4/3 & 0 & 0 & 0 & 14/3 \\
    2 & 1 & 0 & 2/3 & 1 & 0 & 0 & -1/3 \\
    2 & 1 & 0 & 0 & 0 & 1 & 0 & 0 \\
    3 & 0 & 0 & 1 & 0 & 0 & 1 & 0 \\
    2 & 0 & 1 & 1/3 & 0 & 0 & 0 & 1/3 \\
\end{matrix}\right)
$$
</div>
<p>$S_1$ 变为 $S_2$ 的过程可以表示为：对第五行，有 $S_2[4][j]=S_1[4][j]/S_1[4][2]$；对其他行，有
$$
S_2[i][j]=S_1[i][j]-S_1[i][2]\cdot S_2[4][j]
$$</p>
<p>接下来寻找下一对换入换出变量，直到在目标函数中，即第一行中没有负数，迭代停止。注意，如果存在 $S_1[4][2]&lt;0$，则说明是无界解。</p>
<h2 id="4-初始解-neq-可行解">4 初始解 $\neq$ 可行解</h2>
<p>但是上述的步骤会出现问题，如果有某一分量 $b_j&lt;0$，则初始解为非可行解。例如</p>
<div>
$$
\begin{aligned}
    \min \quad & x_1+2x_2 & \\
    s.t. \quad & x_1+x_2 &\leq 2 \\
    & x_1+x_2 &\geq 1 \\
    & x_1,x_2 &\geq 0
\end{aligned}
$$
</div>
<p>此时初始解为 $X={0,0,2,-1}$ 不是可行解。在本例中，由于目标函数中不存在负分量，迭代直接停止。所以需要找到初始基可行解。</p>
<h2 id="5-初始化">5 初始化</h2>
<p>在上述的例子中，构造一个辅助线性规划 (auxiliary linear program)，如下</p>
<div>
$$
\begin{aligned}
    \min \quad & x_0 && \\
    s.t.\quad & x_1+x_2 - x_0 && \leq 2 \\
    & -x_1 - x_2 - x_0 && \leq -1 \\
    & x_1,x_2,x_0 && \geq 0
\end{aligned}
$$
</div>
<p>如果这个辅助线性规划 $L_{aux}$ 最优解为 $0$，则证明原线性规划问题 $L$ 有解。否则，原问题也不存在最优解。</p>
<div class="details admonition tip">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>证明<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>Suppose that $L$ has a feasible solution $\bar{x}$. Then the solution $x_0=0$ combined with $\bar{x}$ is a feasible solution to $L_{aux}$ with objective value $0$. Since $x_0\geq 0$ is a constraint of $L_{aux}$ and the objective function is to minimize $x_0$, this solution must be optimal for $L_{aux}$.</p>
<p>Conversely, suppose that the optimal objective value of $L_{aux}=0$. Then $x_0=0$, and the remaining solution values of $\bar{x}$ satisfy the constraints of $L$.</p>
</div>
        </div>
    </div>
<p>将 $L_{aux}$ 松弛之后，将 $x_0$ 作为换入变量，并且选择 $\min{b_i}$ 的一行作为换出变量。因为在 $L_{aux}$ 中 $x_0$ 的系数为 $-1$，这表示在换入 $x_0$ 时，矩阵的每一行都会减去 $\min {b_i}$。因为最小的 $b_i$ 为负，所以能够保证在将 $x_0$ 换入之后的解为可行解。</p>
<p>如果能够得到 $L_{aux}$ 的最优值为 $0$，则可以用最终 $L_{aux}$ 的基变量替换原问题的基变量，即直接将矩阵中含有 $x_0$ 的列去掉 (**如果 $x_0$ 是基变量，则将其与任意非基变量进行换出**)，并修改目标函数行</p>
<div>
$$
S=
\left(\begin{array}{c|r|rrrr}
    0 & 1 & 0 & 0 & 0 & 0 \\
    1 & -2 & 0 & 0 & 1 & 1 \\
    1 & 1 & 1 & 1 & 0 & -1 \\
\end{array}\right)\Rightarrow
\left(\begin{matrix}
    1 &  1 & 2 & 0 & 0 \\
    1 &  0 & 0 & 1 & 1 \\
    1 &  1 & 1 & 0 & -1 \\
\end{matrix}\right)
$$
</div>
<h2 id="6-代码实现">6 代码实现</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">class</span> <span class="nc">Simplex</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">max_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>  <span class="c1"># default is solve min LP, if want to solve max lp,should * -1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_mode</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">obj</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">max_mode</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span> <span class="n">max_mode</span>

    <span class="k">def</span> <span class="nf">add_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">mat</span><span class="p">,</span> <span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_simplex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">while</span> <span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">col</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># use Bland&#39;s method to avoid degeneracy. use mat[0].argmin() ok?</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">mat</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">mat</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="k">if</span> <span class="n">mat</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mh">0x7fffffff</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>
                            <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">mat</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># find the theta index</span>
            <span class="k">if</span> <span class="n">mat</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># the theta is ∞, the problem is unbounded</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pivot</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_mode</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">{</span><span class="n">B</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span> <span class="n">mat</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="k">if</span> <span class="n">B</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_pivot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span>
        <span class="n">mat</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">/=</span> <span class="n">mat</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">mat</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="n">row</span>
        <span class="n">mat</span><span class="p">[</span><span class="n">ids</span><span class="p">]</span> <span class="o">-=</span> <span class="n">mat</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">*</span> <span class="n">mat</span><span class="p">[</span><span class="n">ids</span><span class="p">,</span> <span class="n">col</span><span class="p">:</span><span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># for each i!= row do: mat[i]= mat[i] - mat[row] * mat[i][col]</span>
        <span class="n">B</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">=</span> <span class="n">col</span>

    <span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat</span><span class="o">.</span><span class="n">shape</span>  <span class="c1"># m - 1 is the number slack variables we should add</span>
        <span class="n">temp</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1"># add diagonal array</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">mat</span><span class="p">,</span> <span class="n">temp</span><span class="p">])</span>  <span class="c1"># combine them!</span>
        <span class="k">if</span> <span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># is the initial basic solution feasible?</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># find the index of min b</span>
            <span class="n">temp</span><span class="p">,</span> <span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">0</span>  <span class="c1"># set first row value to zero, and store the previous value</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">mat</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pivot</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">mat</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_simplex</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># the problem has no answer</span>

            <span class="k">if</span> <span class="n">mat</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">in</span> <span class="n">B</span><span class="p">:</span>  <span class="c1"># if the x0 in B, we should pivot it.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pivot</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">B</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mat</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">temp</span><span class="p">,</span> <span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">:,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>  <span class="c1"># recover the first line</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">B</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_simplex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mat</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="7-从几何的角度">7 从几何的角度</h2>
<p>线性规划问题的最优解在 polyhedron 的各个<strong>顶点</strong>上，而不需要考虑可行域内部点。在单纯形运算中，基变量即为顶点。所以需要做的就是按照一定的规则沿着边遍历顶点，直到无法继续更新了为止。</p>
<p>设当前的顶点为 $x$，下一个顶点为按照方向为 $\lambda$ 的边走长度 $\theta$，然后可以找到新的顶点 $x'=x+\theta\lambda$。体现在约束矩阵 $A$ 中即为用基变量的列约束的线性组合得到换入变量的列约束的权重向量。还是用最初的例子，</p>
<div>
$$
A=(A_1;\dots;A_7)=
\left(\begin{matrix}
    1 & 1 & 1 & 1 & 0 & 0 & 0 \\
    1 & 0 & 0 & 0 & 1 & 0 & 0 \\
    0 & 0 & 1 & 0 & 0 & 1 & 0 \\
    0 & 3 & 1 & 0 & 0 & 0 & 1 \\
\end{matrix}\right)
$$
</div>
<p>用图表示为：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/Skydominate/image_bed@main/image115.jpg"
        data-srcset="https://cdn.jsdelivr.net/gh/Skydominate/image_bed@main/image115.jpg, https://cdn.jsdelivr.net/gh/Skydominate/image_bed@main/image115.jpg 1.5x, https://cdn.jsdelivr.net/gh/Skydominate/image_bed@main/image115.jpg 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/Skydominate/image_bed@main/image115.jpg"
        title="单纯形" /></p>
<p>初始的顶点为 $(0,0,0,4,2,3,6)$， 此时换入变量为 $x_2$，基变量为 $x_4,x_5,x_6,x_7$。用基变量的列约束表示换入变量的列约束，即为 $A_2=A_4+3A_7$，得到 $\lambda=(0,1,0,-1,0,0,-3)$。长度 $\theta$ 即为约束最紧的值 $\theta=\min{S_1[i][0]/S_1[i][2]:i\in [1,7]}=2$。因此，下一个遍历的顶点为 $(0,2,0,2,2,3,0)$，即沿着换入变量 $x_2$ 的方向到了下一个顶点。</p>
<p>为什么可以用列的线性组合表示边的方向，可以这么理解：在确定换入变量之后，需要将换入变量的约束列变为单位矩阵的列。而 $x_i'=x_i+\theta\lambda$ 可以理解为将每个约束中的 $x_2$ 替换为相应的非基变量的组合。</p>
<hr>
<p>如果可行域并不是凸紧集，则可以用其 convex hull 来代替原可行域，同样可以得出最优解。</p>
<div class="details admonition tip">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>证明<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Let $s\in D$ is the optimal solution of $\min_{y\in D}c^Ty$, in which $D=conv(V)$, $V$ is the feasible region of LP. Then there is $s=\sum_{i=1}^k\alpha_i v_i$, means that $s$ is the weighted average of some finite set of &ldquo;vertices&rdquo; $v_1,\dots,v_k\in V$, with $\alpha_i\geq 0,\sum_i \alpha_i=1$. By linearity of the inner product
$$
c^T s=c^T \sum_{i=1}^k\alpha_i v_i=\sum_{i=1}^k\alpha_i c^Tv_i
$$
Therefore, we must have that $c^Tv_i\leq c^Ts$ for at least one indices $i$, means that
$$
\min_{y\in D}c^Ty = c^T s \leq \min_{y\in V}c^Ty \leq c^Tv_i\leq c^Ts
$$
$v_i$ is also the optimal solution.</div>
        </div>
    </div>
<h2 id="8-单纯形的时间复杂度">8 单纯形的时间复杂度</h2>
<p>在算法中，每次查找一个换出变量需要 $O(m+n)$ (即需要遍历所有松弛后的基变量与非基变量)。而对矩阵变换则需要 $O(m\cdot(m+n))$。因此在大多数情况下，单纯形为多项式时间复杂度 (polynomial time complexity)。</p>
<p>但是 V. Klee and G. L. Minty[1972] 构造了一个例子：</p>
<div>
$$
\begin{aligned}
    \max \quad & x_n & & \\
    s.t.\quad & \delta & \leq x_i & \leq 1 \\
    & \delta x_{i-1} & \leq x_i & \leq 1-\delta x_{i-1} \\
    & & x_i &\geq 0
\end{aligned}
$$
</div>
<p>在这个例子中，单纯形算法要遍历 $2^n$ 个顶点。根据这个例子，可以得到单纯形算法不是一个多项式时间复杂度的算法。2001年 Daniel A. Spielman 和 Shang-Hua Teng 提出了平滑型复杂度理论 (smoothed complexity)，解决了单纯形算法在实际运行时是多项式时间平滑复杂度的。</p>
<ul>
<li>Average-case analysis was first introduced to overcome the limitations of worst-case analysis, however the difficulty is saying what an average case is. The actual inputs and distribution of inputs may be different in practice from the assumptions made during the analysis.</li>
<li>Smoothed analysis is a hybrid of worst-case and average-case analyses that inherits advantages of both, by measuring the expected performance of algorithms under slight random perturbations of worst-case inputs.</li>
<li>The performance of an algorithm is measured in terms of both the input size, and the magnitude of the perturbations.</li>
<li>If the smoothed complexity of an algorithm is low, then it is unlikely that the algorithm will take long time to solve practical instances whose data are subject to slight noises and imprecisions.</li>
</ul></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2023-10-30</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/simplex/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/%E8%BF%90%E7%AD%B9%E4%BC%98%E5%8C%96/">运筹优化</a>,&nbsp;<a href="/tags/algorithm/">algorithm</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/latex-project/" class="prev" rel="prev" title="多文件 Latex 项目"><i class="fas fa-angle-left fa-fw"></i>多文件 Latex 项目</a>
            <a href="/latex-bib/" class="next" rel="next" title="LaTex中BibTex参考文献类型及引用格式">LaTex中BibTex参考文献类型及引用格式<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.88.1">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Lioyd Shaw</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer>
 


</div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"valine":{"appId":"uefnzaEGhgPRfPDaRNWQ3MF4-MdYXbMMI","appKey":"4aOKu9jSOSSr2sL3DAec7Rkn","avatar":"robohash","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@5.0.1/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":true,"highlight":true,"lang":"zh-cn","pageSize":10,"placeholder":"晚来天欲雪，能饮一杯无？","recordIP":true,"visitor":true}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.zh-cn","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
